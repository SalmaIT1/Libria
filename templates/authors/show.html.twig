{% extends 'base.html.twig' %}
{% block title %}{{ author.prenom }} {{ author.nom }} - Author | Libria{% endblock %}
{% block body %}
<div class="container py-4 authorprofile-modern">
    <div class="hero-authorcard mb-4 p-4 shadow-lg mx-auto">
        <div class="d-flex flex-column flex-md-row align-items-center">
            <div class="author-modern-avatar-lg mb-3 mb-md-0">
                <span class="author-initials-lg">
                    {{ (author.prenom|default('')|length > 0 ? author.prenom|split('')|first|upper : '?') }}{{ (author.nom|default('')|length > 0 ? author.nom|split('')|first|upper : '') }}
                </span>
            </div>
            <div class="flex-fill ps-md-4">
                <h2 class="fw-bold mb-2 book-title">{{ author.prenom }} {{ author.nom }}</h2>
                {% if author.biographie %}
                    <p class="text-muted mb-0" style="font-size:0.95rem;line-height:1.6;max-width:680px;">{{ author.biographie }}</p>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="modern-section-title mb-3 mt-4"><span class="icon-wrap"><i class="bi bi-book"></i></span>Books by {{ author.prenom }}<div class="accent-line"></div></div>
    <div class="modern-books-bg row g-4 px-2 py-2">
        {% for livre in books %}
            <div class="col-md-4 col-lg-3">
                <div class="library-card book-modern-card h-100">
                    <a href="{{ path('book_show', {id: livre.id}) }}" class="text-decoration-none">
                        {% if livre.image %}
                            <img src="{{ asset('uploads/books/' ~ livre.image) }}" alt="{{ livre.titre }}" class="book-cover" style="object-fit:cover;width:100%;height:180px;">
                        {% else %}
                            <div class="book-cover" style="height: 180px;display:flex;align-items:center;justify-content:center;font-size:2.8rem;background:var(--vanilla);color:var(--caramel);">
                                <i class="bi bi-book"></i>
                            </div>
                        {% endif %}
                    </a>
                    <div class="p-3">
                        <h6 class="mt-2 mb-1 book-title">{{ livre.titre }}</h6>
                        {% if livre.editeur %}
                            <div class="mb-1">
                                <i class="bi bi-building-fill" style="color: var(--mocca);"></i>
                                <a href="{{ path('publisher_show', {id: livre.editeur.id}) }}" class="text-decoration-none small ms-1" style="color: var(--mocca); font-weight: 500;">{{ livre.editeur.nomEditeur }}</a>
                            </div>
                        {% endif %}
                        <a href="{{ path('book_show', {id: livre.id}) }}" class="btn btn-outline-secondary btn-sm"><i class="bi bi-eye"></i> Book Details</a>
                    </div>
                </div>
            </div>
        {% else %}
            <div class="col-12">
                <div class="alert alert-info">No books found for this author.</div>
            </div>
        {% endfor %}
    </div>
</div>
<style>
.authorprofile-modern {
    min-height: 70vh;
}
.hero-authorcard {
    background: rgba(255,255,255,.95);
    border-radius: 1rem;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    border: 1px solid var(--border-color);
    max-width: 700px;
    position: relative;
}
[data-theme='dark'] .hero-authorcard { background: rgba(35,33,24,0.95); border: 1px solid var(--border-color); }
.modern-section-title {
    font-size: 1.5rem; font-weight:700; font-family:'Playfair Display',serif; color:var(--text-primary); display:flex;align-items:center;gap:0.7rem;position:relative;z-index:2;
}
.modern-section-title .icon-wrap {background:linear-gradient(135deg,var(--vanilla),var(--caramel));color:white;display:inline-flex;border-radius:0.6rem;font-size:1.1em;padding:0.14em .34em; margin-right:.2em;}
.accent-line {width:74px;height:3px;border-radius:2px;margin-left:.7rem;background:linear-gradient(90deg,var(--caramel),var(--mocca),var(--vanilla));opacity:.75;}
.author-modern-avatar-lg {
    width: 80px;height: 80px;border-radius:50%;background:var(--caramel);box-shadow:0 2px 6px rgba(0,0,0,0.1);display:flex;align-items:center;justify-content:center;font-size:2.2rem;font-weight:600;color:white;position:relative;margin-bottom:0.2rem;border:none;
}
[data-theme='dark'] .author-modern-avatar-lg{background:var(--mocca);}
.author-initials-lg{font-family:'Playfair Display',serif;font-size:1.8rem;letter-spacing:.01em;}
.modern-books-bg{background:rgba(215,189,166,0.11);border-radius:1.7rem;}
[data-theme='dark'] .modern-books-bg{background:rgba(63,47,28,0.18);}
.book-modern-card:hover{box-shadow:0 7px 27px -8px var(--caramel),0 2px 9px #d7bda631;transform:scale(1.029);}
</style>
{% endblock %}
